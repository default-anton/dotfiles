#!/usr/bin/env bash

# To set up crwl, run `uvx --from crawl4ai crawl4ai-setup`
# If it's still not working, run `uvx --from crawl4ai crawl4ai-doctor`

URL="$1"

if [[ "$URL" =~ ^https://raw\.githubusercontent\.com/.+\.md$ ]] || [[ "$URL" =~ ^https://gist\.githubusercontent\.com/.+/raw/.+\.md$ ]]; then
  curl -sSL "$URL"
  exit $?
fi

uvx --from crawl4ai crwl "$URL" \
  -o md-fit \
  -B ~/.dotfiles/config/crwl/browser.yml \
  -C ~/.dotfiles/config/crwl/crawler.yml \
  -f ~/.dotfiles/config/crwl/filter_pruning.yml \
